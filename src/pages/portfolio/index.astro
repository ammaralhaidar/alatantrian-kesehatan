---
import Layout from '~/layouts/PageLayout.astro';
import Headline from '~/components/ui/Headline.astro';
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import Image from '~/components/common/Image.astro';
import { getCollection } from 'astro:content';

const metadata = {
  title: 'Portofolio Klien Alat Antrian Kesehatan',
};

const portfolios = await getCollection('portfolio');
console.log('JUMLAH PORTOFOLIO:', portfolios.length);
console.log('DATA PORTOFOLIO:', JSON.stringify(portfolios, null, 2));
---

<Layout metadata={metadata}>
  <section class="page-header py-12 md:py-20 bg-blue-50 dark:bg-slate-800">
    <Headline
      title="Klien Kepercayaan Kami"
      subtitle="Lihat bagaimana kami membantu berbagai Rumah Sakit dan Faskes meningkatkan efisiensi pelayanan mereka."
    />
  </section>

  <WidgetWrapper containerClass="max-w-7xl mx-auto" isDark={false}>
    <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
      {
        portfolios.map((item) => (
          <a
            href={`/portfolio/${item.id}`}
            class="group relative block overflow-hidden rounded-lg shadow-lg hover:shadow-xl transition duration-300"
          >
            <div class="aspect-w-4 aspect-h-3 bg-gray-200">
              {item.data.image && (
                <Image
                  src={item.data.image}
                  alt={item.data.title}
                  class="h-full w-full object-cover transition duration-700 group-hover:scale-110"
                  widths={[400, 800]}
                  width={800}
                  height={600}
                />
              )}
            </div>

            <div class="absolute inset-0 flex flex-col justify-end bg-gradient-to-t from-black/80 via-black/40 to-transparent p-6 opacity-90 transition-opacity">
              <span class="mb-2 inline-block rounded bg-primary px-2 py-1 text-xs font-bold text-white w-fit">
                {item.data.category}
              </span>
              <h3 class="text-xl font-bold text-white">{item.data.title}</h3>
              <p class="mt-2 text-sm text-gray-300 line-clamp-2">{item.data.description}</p>
            </div>
          </a>
        ))
      }
    </div>
  </WidgetWrapper>
</Layout>
